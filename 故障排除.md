# 故障排除指南

## 问题：Chrome Runtime 不可用错误

### 错误现象
- 浏览器控制台显示："Chrome Runtime不可用，无法发送消息"
- 复制的文本没有被记录到插件中

### 产生原因
当你在开发过程中**重新加载扩展**后，已经注入到网页中的 content script 的 `chrome.runtime` 上下文会失效，导致无法与后台脚本通信。

### 解决方法

#### ✅ 方法1：刷新网页（推荐）
1. 在重新加载扩展后，**刷新所有已打开的网页**
2. 按 `F5` 或 `Ctrl+R` (Windows) / `Cmd+R` (Mac)
3. 这样会重新注入新的 content script

#### ✅ 方法2：关闭并重新打开标签页
如果刷新不起作用，关闭标签页并重新打开

### 已实施的改进

最新版本的代码已经改进了错误处理：

1. **智能检测**：增强的 Runtime 可用性检查
2. **静默处理**：出错时不会弹出错误提示，只在控制台记录
3. **友好提示**：控制台会显示 "💡 提示：扩展已重新加载，请刷新此页面以恢复功能"

### 正常使用流程

1. **安装/更新扩展后**：
   - 打开或刷新你要使用的网页

2. **复制文本**：
   - 方式1：选中文本后按 `Ctrl+C` (会自动记录)
   - 方式2：选中文本后点击浮动的"复制"按钮

3. **查看记录**：
   - 点击浏览器工具栏的扩展图标
   - 在弹出窗口中查看复制历史

### 验证是否正常工作

1. 打开浏览器控制台 (F12)
2. 选择并复制一些文本
3. 应该看到类似的日志：
   ```
   ✅ 自动检测到文本复制: [你复制的文本...]
   ```

### 如果仍然有问题

1. 完全重新加载扩展
2. 关闭所有标签页
3. 重新打开标签页
4. 检查扩展权限是否完整
