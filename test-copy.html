<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤åˆ¶åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #f8f9fa;
        }

        .test-section {
            background: white;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .test-text {
            background: #f1f3f4;
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            user-select: text;
            font-size: 16px;
            line-height: 1.6;
        }

        h1 {
            color: #1d1d1f;
            font-size: 36px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 40px;
        }

        h2 {
            color: #1d1d1f;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .instructions {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #2196f3;
            margin-bottom: 30px;
        }

        .debug-panel {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }

        button {
            background: #007aff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        button:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª å¤åˆ¶åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>

    <div class="instructions">
        <h3>ä½¿ç”¨è¯´æ˜ï¼š</h3>
        <ol>
            <li>é€‰æ‹©ä¸‹é¢ä»»ä½•ä¸€æ®µæ–‡å­—</li>
            <li>ä¼šå‡ºç°"å¤åˆ¶"æŒ‰é’®</li>
            <li>ç‚¹å‡»æŒ‰é’®è¿›è¡Œå¤åˆ¶</li>
            <li>æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—äº†è§£è¯¦ç»†è¿‡ç¨‹</li>
            <li>å°è¯•ç²˜è´´éªŒè¯å¤åˆ¶æ˜¯å¦æˆåŠŸ</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>åŸºç¡€å¤åˆ¶æµ‹è¯•</h2>
        <div class="test-text">
            è¿™æ˜¯ä¸€æ®µç”¨äºæµ‹è¯•å¤åˆ¶åŠŸèƒ½çš„æ™®é€šæ–‡æœ¬ã€‚é€‰æ‹©è¿™æ®µæ–‡å­—ååº”è¯¥ä¼šå‡ºç°è“è‰²çš„"å¤åˆ¶"æŒ‰é’®ã€‚ç‚¹å‡»æŒ‰é’®åæ–‡æœ¬åº”è¯¥è¢«å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚
        </div>
    </div>

    <div class="test-section">
        <h2>ç‰¹æ®Šå­—ç¬¦æµ‹è¯•</h2>
        <div class="test-text">
            ç‰¹æ®Šå­—ç¬¦æµ‹è¯•ï¼šä¸­æ–‡ã€è‹±æ–‡ã€123456ã€!@#$%^&*()ã€ã€ã€‘ã€Šã€‹""''ã€emojiè¡¨æƒ…ğŸ˜ŠğŸ‰ğŸ”¥ã€æ¢è¡Œç¬¦æµ‹è¯•
        </div>
    </div>

    <div class="test-section">
        <h2>é•¿æ–‡æœ¬æµ‹è¯•</h2>
        <div class="test-text">
            è¿™æ˜¯ä¸€æ®µè¾ƒé•¿çš„æ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•å¤åˆ¶åŠŸèƒ½åœ¨å¤„ç†é•¿æ–‡æœ¬æ—¶çš„è¡¨ç°ã€‚åŒ…å«å¤šç§ä¸åŒç±»å‹çš„å†…å®¹ï¼š

            æ•°å­—ï¼š1234567890
            ç¬¦å·ï¼š~!@#$%^&*()_+-=[]{}|;':",./<>?
            ä¸­æ–‡å­—ç¬¦ï¼šç®€ä½“ä¸­æ–‡å’Œç¹é«”ä¸­æ–‡
            è‹±æ–‡å­—æ¯ï¼šABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
            è¡¨æƒ…ç¬¦å·ï¼šğŸ˜€ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…ğŸ˜‚ğŸ¤£ğŸ˜ŠğŸ˜‡

            é€‰æ‹©è¿™æ®µé•¿æ–‡æœ¬è¿›è¡Œå¤åˆ¶æµ‹è¯•ï¼Œå¯ä»¥éªŒè¯å¤åˆ¶åŠŸèƒ½æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®å¤„ç†å„ç§å¤æ‚å†…å®¹ã€‚
        </div>
    </div>

    <div class="test-section">
        <h2>è°ƒè¯•ä¿¡æ¯</h2>
        <button onclick="checkPluginStatus()">æ£€æŸ¥æ’ä»¶çŠ¶æ€</button>
        <button onclick="clearDebugLog()">æ¸…ç©ºè°ƒè¯•æ—¥å¿—</button>
        <div id="debugPanel" class="debug-panel" style="margin-top: 20px;">
            ç­‰å¾…è°ƒè¯•ä¿¡æ¯...
        </div>
    </div>

    <script>
        let debugPanel = document.getElementById('debugPanel');
        let logMessages = [];

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${type.toUpperCase()}: ${message}`;
            logMessages.push(logEntry);

            debugPanel.textContent = logMessages.join('\n');
            debugPanel.scrollTop = debugPanel.scrollHeight;
            console.log(logEntry);
        }

        function clearDebugLog() {
            logMessages = [];
            debugPanel.textContent = 'è°ƒè¯•æ—¥å¿—å·²æ¸…ç©º...';
        }

        function checkPluginStatus() {
            log('=== å¼€å§‹æ£€æŸ¥æ’ä»¶çŠ¶æ€ ===');

            // æ£€æŸ¥Chrome API
            if (typeof chrome !== 'undefined') {
                log('âœ“ Chromeå¯¹è±¡å¯ç”¨');

                if (chrome.runtime) {
                    log('âœ“ Chrome runtime APIå¯ç”¨');

                    // æµ‹è¯•å‘é€æ¶ˆæ¯
                    try {
                        chrome.runtime.sendMessage({type: 'PING'}, (response) => {
                            if (chrome.runtime.lastError) {
                                log(`âœ— æ¶ˆæ¯å‘é€å¤±è´¥: ${chrome.runtime.lastError.message}`, 'error');
                            } else {
                                log('âœ“ æ¶ˆæ¯å‘é€æˆåŠŸ');
                                log(`å“åº”: ${JSON.stringify(response)}`);
                            }
                        });
                    } catch (error) {
                        log(`âœ— æ¶ˆæ¯å‘é€å¼‚å¸¸: ${error.message}`, 'error');
                    }
                } else {
                    log('âœ— Chrome runtime APIä¸å¯ç”¨', 'error');
                }
            } else {
                log('âœ— Chromeå¯¹è±¡ä¸å¯ç”¨', 'error');
            }

            // æ£€æŸ¥å†…å®¹è„šæœ¬
            if (window.copyRecorder) {
                log('âœ“ å¤åˆ¶è®°å½•å™¨å·²åŠ è½½');
                log(`æ–¹æ³•: ${Object.getOwnPropertyNames(window.copyRecorder).filter(name => typeof window.copyRecorder[name] === 'function').join(', ')}`);
            } else {
                log('âœ— å¤åˆ¶è®°å½•å™¨æœªåŠ è½½', 'error');
                log('å¯èƒ½åŸå› ï¼šæ’ä»¶æœªæ­£ç¡®å®‰è£…æˆ–é¡µé¢æœªå®Œå…¨åŠ è½½');
            }

            // æ£€æŸ¥å‰ªè´´æ¿API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                log('âœ“ ç°ä»£å‰ªè´´æ¿APIå¯ç”¨');
            } else {
                log('âš ï¸ ç°ä»£å‰ªè´´æ¿APIä¸å¯ç”¨ï¼Œå°†ä½¿ç”¨é™çº§æ–¹æ¡ˆ', 'warning');
            }

            log('=== æ’ä»¶çŠ¶æ€æ£€æŸ¥å®Œæˆ ===');
        }

        // ç›‘å¬é€‰æ‹©äº‹ä»¶
        document.addEventListener('mouseup', () => {
            const selection = window.getSelection();
            const selectedText = selection.toString().trim();
            if (selectedText) {
                log(`æ£€æµ‹åˆ°æ–‡æœ¬é€‰æ‹©: "${selectedText.substring(0, 50)}${selectedText.length > 50 ? '...' : ''}"`);
            }
        });

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–æ£€æŸ¥
        window.addEventListener('load', () => {
            log('é¡µé¢åŠ è½½å®Œæˆ');
            setTimeout(checkPluginStatus, 1000);
        });
    </script>
</body>
</html>